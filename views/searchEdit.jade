doctype html
html
    head
        title= "ТИС-словарь"
        link(rel='stylesheet', type='text/css', href='/codebase/dhtmlx.css')
        script(src='/codebase/dhtmlx.js')
        link(rel="stylesheet",type="text/css",href='/css/jquery.dataTables.css')
        script(type="text/javascript", language="javascript", src='/js/jquery.js')
        script(type="text/javascript", language="javascript", src='/js/jquery.dataTables.js')
        script(type="text/javascript", language="javascript", class="init").
            function filterColumn ( i ) {
                $('#my_table').DataTable().column( i ).search(
                    $('#col'+i+'_filter').val()
                ).draw();
            }
            $(document).ready(function() {

                var selectedObjectID;

                var table = $('#my_table').DataTable( {
                       "language": {
                           "url": "../resources/ru_RU.txt"
                       }
                } );

                $('input.column_filter').on( 'keyup click', function () {
                    filterColumn( $(this).parents('td').attr('data-column') );
                } );


                $('#my_table tbody').on( 'click', 'tr', function () {
                    if ( $(this).hasClass('selected') ) {
                        $(this).removeClass('selected');
                    }
                    else {
                        table.$('tr.selected').removeClass('selected');
                        $(this).addClass('selected');
                        selectedObjectID = this.id;
                    }
                } );
                $('#delete').click( function () {
                    table.row('.selected').remove().draw( false );
                    var parameters = { id: selectedObjectID };
                    $.get( '/deleteObject', parameters, function(data) {
                        $('#results').html(data);
                    });
                } );

                $('#edit').click( function () {

                    window.location.replace('/editObject/'+selectedObjectID);


                } );

            } );
    body
        h1= "ТИС-словарь"
        div(id="myForm")

        table(cellpadding="3",cellspacing="0", border="0", style="width: 30%; margin: 0 auto 2em auto;")
            tbody
                tr
                    th Домен
                    th Обозначение
                    th Наименование концепта

                tr( id="filter_col1", data-column="1")
                    td(align="center",id="filter_col1", data-column="1")
                        input( type="text", class="column_filter", id="col1_filter",placeholder='Домен')
                    td(align="center", id="filter_col2", data-column="2")
                        input( type="text", class="column_filter", id="col2_filter",placeholder='Обозначение')
                    td(align="center", id="filter_col3", data-column="3")
                        input( type="text", class="column_filter", id="col3_filter",placeholder='Наименование концепта')

        table
            tbody
                tr
                    td
                        a(href="/addObject")
                            img(src="/img/Add.png")
                        img(src="/img/Edit.png", id="edit")
                        img(src="/img/Delete.png", id="delete")

            table(border=1, cellpadding=10, id="my_table", class="display")
                thead
                    th Системный номер
                    th Домен
                    th Обозначение
                    th Наименование концепта
                    th Тип поля
                    th Длина поля
                    th Кол-во знаков после запятой
                    th Мин. значение
                    th Макс. значение
                    th Размерность
                    th Номер классификатора

                tbody
                    each obj in jsonObjects
                        tr(id="#{obj.id}")
                            td
                                | #{obj.at_syst}
                            td
                                | #{obj.dom}
                            td
                                | #{obj.Den}
                            td
                                | #{obj.Naim}
                            td
                                | #{obj.At_Type}
                            td
                                | #{obj.At_Len}
                            td
                                | #{obj.At_Dec}
                            td
                                | #{obj.At_Min}
                            td
                                | #{obj.At_Max}
                            td
                                | #{obj.At_Razm}
                            td
                                | #{obj.At_Kl}
